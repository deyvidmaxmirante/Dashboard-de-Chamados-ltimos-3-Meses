<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Avan√ßado de Chamados</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="dashboard-styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Dashboard Avan√ßado de Chamados</h1>
            <p>An√°lise completa com m√∫ltiplas visualiza√ß√µes</p>
        </header>

        <!-- Se√ß√£o de Importa√ß√£o -->
        <div class="import-section">
            <div class="instructions">
                <h4>üìã Como importar seus dados:</h4>
                <ol>
                    <li><strong>Op√ß√£o 1:</strong> Baixe sua planilha como CSV e fa√ßa upload</li>
                    <li><strong>Op√ß√£o 2:</strong> Copie e cole os dados diretamente da planilha</li>
                    <li>Se sua planilha tem m√∫ltiplas p√°ginas, importe cada uma separadamente</li>
                </ol>
            </div>

            <div class="import-options">
                <div class="import-option">
                    <h3>üìÅ Upload CSV</h3>
                    <label for="csvFile" class="file-label">Escolher Arquivo CSV</label>
                    <input type="file" id="csvFile" accept=".csv" />
                </div>

                <div class="import-option">
                    <h3>üìã Colar Dados</h3>
                    <textarea id="pasteData" placeholder="Cole aqui os dados da planilha..."></textarea>
                </div>
            </div>

            <div class="sheet-selection">
                <label for="sheetName">Nome da P√°gina/Aba:</label>
                <input type="text" id="sheetName" placeholder="Ex: Janeiro, Fevereiro, etc." />
            </div>

            <button class="process-btn" onclick="processData()">üöÄ Processar Dados</button>
            <div id="status" class="status" style="display: none;"></div>
        </div>

        <!-- Se√ß√£o de Sele√ß√£o de Gr√°ficos -->
        <div class="chart-selection-section" id="chartSelectionSection" style="display: none;">
            <h3>üìä Configurar Visualiza√ß√µes</h3>
            
            <div class="selection-tabs">
                <button class="tab-btn active" onclick="switchTab('basic')">Gr√°ficos B√°sicos</button>
                <button class="tab-btn" onclick="switchTab('comparison')">Compara√ß√µes</button>
                <button class="tab-btn" onclick="switchTab('cross-analysis')">An√°lise Cruzada</button>
            </div>

            <!-- Aba Gr√°ficos B√°sicos -->
            <div class="tab-content active" id="basic-tab">
                <div class="chart-options">
                    <div class="chart-option">
                        <input type="checkbox" id="atendente-chart" value="atendente">
                        <label for="atendente-chart">Chamados por Atendente</label>
                        <select id="atendente-type">
                            <option value="pie">Pizza</option>
                            <option value="bar">Barras</option>
                            <option value="doughnut">Rosquinha</option>
                        </select>
                    </div>

                    <div class="chart-option">
                        <input type="checkbox" id="data-chart" value="data">
                        <label for="data-chart">Chamados por Data</label>
                        <select id="data-type">
                            <option value="line">Linha</option>
                            <option value="bar">Barras</option>
                            <option value="area">√Årea</option>
                        </select>
                    </div>

                    <div class="chart-option">
                        <input type="checkbox" id="transportadora-chart" value="transportadora">
                        <label for="transportadora-chart">Chamados por Transportadora</label>
                        <select id="transportadora-type">
                            <option value="bar">Barras</option>
                            <option value="pie">Pizza</option>
                            <option value="doughnut">Rosquinha</option>
                        </select>
                    </div>

                    <div class="chart-option">
                        <input type="checkbox" id="motivo-chart" value="motivo">
                        <label for="motivo-chart">Motivos dos Chamados</label>
                        <select id="motivo-type">
                            <option value="bar">Barras</option>
                            <option value="pie">Pizza</option>
                            <option value="doughnut">Rosquinha</option>
                        </select>
                    </div>

                    <div class="chart-option">
                        <input type="checkbox" id="recontato-chart" value="recontato">
                        <label for="recontato-chart">Recontato</label>
                        <select id="recontato-type">
                            <option value="doughnut">Rosquinha</option>
                            <option value="pie">Pizza</option>
                            <option value="bar">Barras</option>
                        </select>
                    </div>

                    <div class="chart-option">
                        <input type="checkbox" id="estado-chart" value="estado">
                        <label for="estado-chart">Estados dos Clientes</label>
                        <select id="estado-type">
                            <option value="bar">Barras</option>
                            <option value="pie">Pizza</option>
                            <option value="doughnut">Rosquinha</option>
                        </select>
                    </div>

                    <div class="chart-option">
                        <input type="checkbox" id="status-chart" value="status">
                        <label for="status-chart">Status Atual</label>
                        <select id="status-type">
                            <option value="doughnut">Rosquinha</option>
                            <option value="pie">Pizza</option>
                            <option value="bar">Barras</option>
                        </select>
                    </div>

                    <div class="chart-option">
                        <input type="checkbox" id="tratativa-chart" value="tratativa">
                        <label for="tratativa-chart">Tratativas</label>
                        <select id="tratativa-type">
                            <option value="bar">Barras</option>
                            <option value="pie">Pizza</option>
                            <option value="doughnut">Rosquinha</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Aba Compara√ß√µes -->
            <div class="tab-content" id="comparison-tab">
                <div class="comparison-options">
                    <h4>Comparar P√°ginas/Per√≠odos</h4>
                    <div class="comparison-setup">
                        <select id="compareSheet1">
                            <option value="">Selecione primeira p√°gina</option>
                        </select>
                        <span>VS</span>
                        <select id="compareSheet2">
                            <option value="">Selecione segunda p√°gina</option>
                        </select>
                    </div>
                    <div class="comparison-metrics">
                        <input type="checkbox" id="compare-total" value="total">
                        <label for="compare-total">Total de Chamados</label>
                        
                        <input type="checkbox" id="compare-atendentes" value="atendentes">
                        <label for="compare-atendentes">Por Atendente</label>
                        
                        <input type="checkbox" id="compare-transportadoras" value="transportadoras">
                        <label for="compare-transportadoras">Por Transportadora</label>
                    </div>
                </div>
            </div>

            <!-- Aba An√°lise Cruzada -->
            <div class="tab-content" id="cross-analysis-tab">
                <div class="cross-analysis-options">
                    <h4>An√°lise Cruzada de Dados</h4>
                    
                    <div class="cross-option">
                        <input type="checkbox" id="cross-atendente-transportadora" value="atendente-transportadora">
                        <label for="cross-atendente-transportadora">Atendente √ó Transportadora</label>
                        <select id="cross-atendente-transportadora-type">
                            <option value="stacked-bar">Barras Empilhadas</option>
                            <option value="grouped-bar">Barras Agrupadas</option>
                            <option value="heatmap">Mapa de Calor</option>
                        </select>
                    </div>

                    <div class="cross-option">
                        <input type="checkbox" id="cross-motivo-transportadora" value="motivo-transportadora">
                        <label for="cross-motivo-transportadora">Motivo √ó Transportadora</label>
                        <select id="cross-motivo-transportadora-type">
                            <option value="stacked-bar">Barras Empilhadas</option>
                            <option value="grouped-bar">Barras Agrupadas</option>
                            <option value="heatmap">Mapa de Calor</option>
                        </select>
                    </div>

                    <div class="cross-option">
                        <input type="checkbox" id="cross-atendente-motivo" value="atendente-motivo">
                        <label for="cross-atendente-motivo">Atendente √ó Motivo</label>
                        <select id="cross-atendente-motivo-type">
                            <option value="stacked-bar">Barras Empilhadas</option>
                            <option value="grouped-bar">Barras Agrupadas</option>
                            <option value="heatmap">Mapa de Calor</option>
                        </select>
                    </div>

                    <div class="cross-option">
                        <input type="checkbox" id="cross-estado-transportadora" value="estado-transportadora">
                        <label for="cross-estado-transportadora">Estado √ó Transportadora</label>
                        <select id="cross-estado-transportadora-type">
                            <option value="stacked-bar">Barras Empilhadas</option>
                            <option value="grouped-bar">Barras Agrupadas</option>
                            <option value="heatmap">Mapa de Calor</option>
                        </select>
                    </div>
                </div>
            </div>

            <button class="generate-btn" onclick="generateSelectedCharts()">üìà Gerar Gr√°ficos Selecionados</button>
        </div>

        <!-- Se√ß√£o de Gr√°ficos -->
        <div class="charts-section" id="chartsSection" style="display: none;">
            <div class="summary" id="summarySection">
                <h3>üìä Resumo Geral</h3>
                <div id="summaryStats"></div>
            </div>

            <div class="charts-grid" id="chartsGrid">
                <!-- Gr√°ficos ser√£o inseridos aqui dinamicamente -->
            </div>
        </div>
    </div>

    <!-- Modal para expandir gr√°ficos -->
    <div id="chartModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div class="modal-chart-container">
                <canvas id="modalChart"></canvas>
            </div>
        </div>
    </div>

    <script src="dashboard-script.js"></script>
</body>
</html>
